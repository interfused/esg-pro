var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};jQuery(document).on("click",".tds-update-preview",function(b){b.preventDefault();window.tdLockerEditor.refresh_preview()});
jQuery().ready(function(){window.tdLockerEditor.refresh_preview();jQuery("body").on("click",".tds-submit-btn",function(b){b.preventDefault()})});window.tdLockerEditor||(window.tdLockerEditor={});
(function(b){window.tdLockerEditor={init:function(){this.track_input_changes();this.initialize_color_pickers()},initialize_color_pickers:function(){var a=this;b().wpColorPicker&&b("input.tds-color-picker").wpColorPicker({change:_.debounce(function(b,e){a.refresh_preview()},500),clear:function(b){a.refresh_preview()}})},get_locker_options:function(){var a={},f=["#tds_locker_types_metabox","#tds_locker_settings_metabox","#tds_locker_styles_metabox"],e;for(e in f)b(f[e]).find("input, select, textarea").each(function(){var c=
b(this);if(!c.is("input")||"text"===c.attr("type")||"checkbox"===c.attr("type")){var d=c.attr("name").match(/\[(.*?)\]/);d&&(d=d[1],"tds_pp_msg"===d?a[d]=window.btoa(encodeURIComponent(c.val())):"checkbox"===c.attr("type")?a[d]=c.is(":checked")?"on":"":a[d]=c.val())}});a.tds_leads_list="";return a},track_input_changes:function(){var a=this,f=["#tds_locker_types_metabox","#tds_locker_settings_metabox","#tds_locker_styles_metabox"],e;for(e in f)b(f[e]).find("input, select, textarea").on("change keyup paste",
_.debounce(function(){a.refresh_preview()},500))},refresh_preview:function(){var a=b(".preview-html"),f=b(".preview-loader");a.addClass("preview-html-loading");f.addClass("preview-loader-visible");var e=this.get_locker_options(),c="";e=$jscomp.makeIterator(Object.entries(e));for(var d=e.next();!d.done;d=e.next()){var g=$jscomp.makeIterator(d.value);d=g.next().value;g=g.next().value;c+=d+'="'+g+'" '}c="[tds_locker "+c+"]";b.ajax({timeout:1E4,type:"POST",url:this.get_rest_endpoint("tds_preview/do_job",
"uuid="+this.get_unique_id()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tds_js_globals.wpRestNonce)},cache:!0,data:{shortcode:c,replyHtml:""},dataType:"json",statusCode:{404:function(){console.log("tds preview - ERROR: 404 not found")},500:function(){console.log("tds preview - ERROR: 500 server error")}},success:function(b){null===b?console.log("%c tds preview - ERROR: Empty response received from server","color: orangered;"):(console.log("%c tds preview data response received from server",
"color: green;"),console.log(b),_.has(b,"replyHtml")&&(a.html(b.replyHtml),setTimeout(function(){f.removeClass("preview-loader-visible");setTimeout(function(){a.removeClass("preview-html-loading")},400)},300)))},error:function(a,b,c){console.log("tds preview - Error callback - textStatus: "+b+" errorThrown: "+c)}})},get_rest_endpoint:function(a,b){return _.isEmpty(window.tds_js_globals.permalinkStructure)?window.tds_js_globals.wpRestUrl+a+"&"+b:window.tds_js_globals.wpRestUrl+a+"?"+b},get_unique_id:function(){function a(){return Math.floor(65536*
(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}};b(function(){window.tdLockerEditor.init()})})(jQuery);
